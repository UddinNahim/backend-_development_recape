<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create a product</title>
</head>
<body>
    <h2>Created a product</h2>

    <form action="" id="productForm">
        <label for="">Product name:</label>
        <input type="text" name="product_name"> <br> <br>

        <label for="">Description:</label>
        <input type="text" name="description"> <br> <br>

        <label for="">Price:</label>
        <input type="text" name="price"> <br> <br>

        <label for="">Image:</label>
        <input type="file" name="image"> <br> <br>

        <label for="">Category:</label>
        <input type="text" name="category"> <br> <br>

        <button type="submit">Create product</button>
      
    </form>
    <div id="result"> </div>

    <script>
    const form = document.getElementById('productForm');
    const resultDiv = document.getElementById('result');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const formData = new FormData(form);

        // Replace with your valid JWT access token
        const accessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzYyODkzNTQ4LCJpYXQiOjE3NjI4OTMyNDgsImp0aSI6ImMxZjNjYzEyYmI2MDRmMjg5YWY5ZjU3ODk2ZWZhZTJjIiwidXNlcl9pZCI6IjEifQ.czNKJofKAwxmXlbWagUeGS7PeLxrmDdonJL2s1NBKrs';

        try {
            const response = await fetch('http://127.0.0.1:8000/products/', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${accessToken}`
                },
                body: formData
            });

            const data = await response.json();

            if (response.ok) {
                resultDiv.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } else {
                resultDiv.innerHTML = `<pre style="color:red;">${JSON.stringify(data, null, 2)}</pre>`;
            }

        } catch (error) {
            resultDiv.innerHTML = `<p style="color:red;">Error: ${error}</p>`;
        }
    });
</script>

    
</body>
</html>